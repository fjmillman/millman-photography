CreateCollection({ name: "User" });
CreateIndex(
	{
		name: "all_users",
		source: Collection("User"),
	}
);
CreateIndex(
	{
		name: "users_by_email",
    permissions: { read: "public" },
		source: Collection("User"),
		terms: [{ field: ["data", "email"] }],
		unique: true
	}
);

CreateCollection({ name: "Image" });
CreateIndex(
	{
		name: "all_images",
		source: Collection("Image"),
	}
);
CreateIndex(
	{
		name: "images_by_slug",
		source: Collection("Image"),
		terms: [{ field: ["data", "slug"] }],
		unique: true
	}
);

CreateCollection({ name: "Tag" });
CreateIndex(
	{
		name: "all_tags",
		source: Collection("Tag"),
	}
);
CreateIndex(
	{
		name: "tags_by_slug",
		source: Collection("Tag"),
		terms: [{ field: ["data", "slug"] }],
		unique: true
	}
);

CreateCollection({ name: "image_tags" });
CreateIndex(
	{
		name: "images_by_tag",
		source: Collection("image_tags"),
		terms: [{ field: ["data", "image"] }],
  	values: [{ field: ["data", "tag"] }]
	}
);

CreateCollection({ name: "Gallery" });
CreateIndex(
	{
		name: "all_galleries",
		source: Collection("Gallery"),
	}
);
CreateIndex(
	{
		name: "galleries_by_slug",
		source: Collection("Gallery"),
		terms: [{ field: ["data", "slug"] }],
		unique: true
	}
);
CreateIndex(
	{
		name: "galleries_by_status",
		source: Collection("Gallery"),
		terms: [{ field: ["data", "status"] }]
	}
);

CreateCollection({ name: "gallery_images" });
CreateIndex(
	{
		name: "images_by_gallery",
		source: Collection("gallery_images"),
		terms: [{ field: ["data", "gallery"] }],
  	values: [{ field: ["data", "image"] }]
	}
);

CreateCollection({ name: "gallery_tags" });
CreateIndex(
	{
		name: "tags_by_gallery",
		source: Collection("gallery_tags"),
		terms: [{ field: ["data", "gallery"] }],
  	values: [{ field: ["data", "tag"] }]
	}
);

CreateCollection({ name: "Post" });
CreateIndex(
	{
		name: "all_posts",
		source: Collection("Post"),
	}
);
CreateIndex(
	{
		name: "posts_by_slug",
		source: Collection("Post"),
		terms: [{ field: ["data", "slug"] }],
		unique: true
	}
);
CreateIndex(
	{
		name: "posts_by_status",
		source: Collection("Post"),
		terms: [{ field: ["data", "status"] }]
	}
);

CreateCollection({ name: "post_images" });
CreateIndex(
	{
		name: "images_by_post",
		source: Collection("post_images"),
		terms: [{ field: ["data", "post"] }],
  	values: [{ field: ["data", "image"] }]
	}
);

CreateCollection({ name: "post_tags" });
CreateIndex(
	{
		name: "tags_by_post",
		source: Collection("post_tags"),
		terms: [{ field: ["data", "post"] }],
  	values: [{ field: ["data", "tag"] }]
	}
);
